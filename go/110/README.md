# No.110

Goã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª `net/http` ã‚’ä½¿ã£ã¦ã€ã‚·ãƒ³ãƒ—ãƒ«ãªHTTPã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆã™ã‚‹

## **1. `net/http` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã¯ï¼Ÿ**

`net/http` ã¯ã€Goã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å«ã¾ã‚Œã‚‹HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚

- **ã‚µãƒ¼ãƒãƒ¼** ã‚’ä½œæˆã™ã‚‹
- **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ** ã‚’ä½œæˆã™ã‚‹
- **ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®åˆ¶å¾¡** ã‚’è¡Œã†

å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼š
ğŸ”— [https://pkg.go.dev/net/http](https://pkg.go.dev/net/http)


## **2. ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜**

1. `http.HandleFunc("/", helloHandler)`
   - ãƒ«ãƒ¼ãƒˆ (`/`) ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã¨ãã« `helloHandler` ã‚’å®Ÿè¡Œã€‚
2. `http.HandleFunc("/status", statusHandler)`
   - `/status` ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã¨ãã« `statusHandler` ã‚’å®Ÿè¡Œã€‚
3. `http.ListenAndServe(":8080", nil)`
   - ãƒãƒ¼ãƒˆ `8080` ã§HTTPã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã€‚


## **3. å®Ÿè¡Œã¨å‹•ä½œç¢ºèª**

1. **ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•**

   ```sh
   go run main.go
   ```

   **å‡ºåŠ›**

   ```plaintext
   Starting server at http://localhost:8080/
   ```

2. **å‹•ä½œç¢ºèª**
   - ãƒ–ãƒ©ã‚¦ã‚¶ã¾ãŸã¯ `curl` ã§ã‚¢ã‚¯ã‚»ã‚¹

   **ãƒ«ãƒ¼ãƒˆ (`/`) ã«ã‚¢ã‚¯ã‚»ã‚¹**

   ```sh
   curl http://localhost:8080/
   ```

   **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**

   ```plaintext
   Hello, World! This is a Go HTTP server.
   ```

   **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯ (`/status`) ã«ã‚¢ã‚¯ã‚»ã‚¹**

   ```sh
   curl http://localhost:8080/status
   ```

   **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**

   ```json
   {"status": "OK"}
   ```

## **4. ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹**

1. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’æ˜ç¤ºçš„ã«è¡Œã†**

   ```go
   if err := http.ListenAndServe(":8080", nil); err != nil {
       log.Fatalf("ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ã«å¤±æ•—ã—ã¾ã—ãŸ: %v", err)
   }
   ```

   - `log.Fatalf` ã‚’ä½¿ã£ã¦ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã‚‰ã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢ã€‚

2. **æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ä½¿ã†**

   ```go
   mux := http.NewServeMux()
   mux.HandleFunc("/", helloHandler)
   mux.HandleFunc("/status", statusHandler)
   http.ListenAndServe(":8080", mux)
   ```

   - `http.NewServeMux()` ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ç®¡ç†ãŒã—ã‚„ã™ããªã‚‹ã€‚
