# No.115

ショッピングカートシステムでは、複数のユーザーが同時に在庫を更新する可能性があります。この問題では、悲観的ロックと楽観的ロックの両方を利用して在庫の整合性を保つ方法を学びます。

**シナリオ**:
- ユーザーが商品を購入する際、在庫数が十分であるかを確認し、在庫を減らす処理を実行します。
- 悲観的ロックを使用して、同時に他のトランザクションがアクセスできないようにします。
- 楽観的ロックを使用して、競合が発生した場合に処理を中止します。

### テーブル設計

#### Products テーブル

| ProductID | ProductName | Stock | Version |
|-----------|-------------|-------|---------|
| 1         | Book        | 50    | 1       |
| 2         | Pen         | 30    | 1       |
| 3         | Notebook    | 20    | 1       |
