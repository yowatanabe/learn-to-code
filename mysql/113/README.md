# No.113

オンラインストアでは、複数のユーザーが同時に商品の在庫を更新する可能性があります。このような競合を防ぎつつ、効率的に在庫を管理するために、**悲観的ロック**と**楽観的ロック**の両方を利用してデータの整合性を確保します。

**シナリオ**:
- 悲観的ロックを使って、特定の商品をロックし、他のユーザーが同時に在庫を変更できないようにします。
- 楽観的ロックを使って、競合が検出された場合に更新を中止する仕組みを実装します。

### テーブル設計

#### Products テーブル

| ProductID | ProductName | Stock | Version |
|-----------|-------------|-------|---------|
| 1         | TV          | 50    | 1       |
| 2         | Laptop      | 30    | 1       |
| 3         | Phone       | 20    | 1       |
